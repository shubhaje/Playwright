"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([["2344"],{7361:function(e,t,s){s.r(t),s.d(t,{default:()=>h,frontMatter:()=>i,metadata:()=>n,assets:()=>a,toc:()=>c,contentTitle:()=>o});var n=JSON.parse('{"id":"test-configuration","title":"Test configuration","description":"Introduction","source":"@site/versioned_docs/version-stable/test-configuration.mdx","sourceDirName":".","slug":"/test-configuration","permalink":"/docs/test-configuration","draft":false,"unlisted":false,"tags":[],"version":"stable","frontMatter":{"id":"test-configuration","title":"Test configuration"},"sidebar":"docs","previous":{"title":"Canary releases","permalink":"/docs/canary-releases"},"next":{"title":"Test use options","permalink":"/docs/test-use-options"}}'),r=s("5893"),l=s("65");s("8168"),s("7645"),s("2079");let i={id:"test-configuration",title:"Test configuration"},o=void 0,a={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Filtering Tests",id:"filtering-tests",level:2},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Expect Options",id:"expect-options",level:2}];function d(e){let t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(t.p,{children:["Playwright has many options to configure how your tests are run. You can specify these options in the configuration file. Note that test runner options are ",(0,r.jsx)(t.strong,{children:"top-level"}),", do not put them into the ",(0,r.jsx)(t.code,{children:"use"})," section."]}),"\n",(0,r.jsx)(t.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,r.jsx)(t.p,{children:"Here are some of the most common configuration options."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  // Look for test files in the \"tests\" directory, relative to this configuration file.\n  testDir: 'tests',\n\n  // Run all tests in parallel.\n  fullyParallel: true,\n\n  // Fail the build on CI if you accidentally left test.only in the source code.\n  forbidOnly: !!process.env.CI,\n\n  // Retry on CI only.\n  retries: process.env.CI ? 2 : 0,\n\n  // Opt out of parallel tests on CI.\n  workers: process.env.CI ? 1 : undefined,\n\n  // Reporter to use\n  reporter: 'html',\n\n  use: {\n    // Base URL to use in actions like `await page.goto('/')`.\n    baseURL: 'http://localhost:3000',\n\n    // Collect trace when retrying the failed test.\n    trace: 'on-first-retry',\n  },\n  // Configure projects for major browsers.\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n  ],\n  // Run your local dev server before starting the tests.\n  webServer: {\n    command: 'npm run start',\n    url: 'http://localhost:3000',\n    reuseExistingServer: !process.env.CI,\n  },\n});\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-forbid-only",children:"testConfig.forbidOnly"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Whether to exit with an error if any tests are marked as ",(0,r.jsx)(t.code,{children:"test.only"}),". Useful on CI."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-fully-parallel",children:"testConfig.fullyParallel"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["have all tests in all files to run in parallel. See ",(0,r.jsx)(t.a,{href:"./test-parallel",children:"Parallelism"})," and ",(0,r.jsx)(t.a,{href:"./test-sharding",children:"Sharding"})," for more details."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-projects",children:"testConfig.projects"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Run tests in multiple configurations or on multiple browsers"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-reporter",children:"testConfig.reporter"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Reporter to use. See ",(0,r.jsx)(t.a,{href:"/docs/test-reporters",children:"Test Reporters"})," to learn more about which reporters are available."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-retries",children:"testConfig.retries"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["The maximum number of retry attempts per test. See ",(0,r.jsx)(t.a,{href:"/docs/test-retries",children:"Test Retries"})," to learn more about retries."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-test-dir",children:"testConfig.testDir"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Directory with the test files."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-use",children:"testConfig.use"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Options with ",(0,r.jsx)(t.code,{children:"use{}"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-web-server",children:"testConfig.webServer"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["To launch a server during the tests, use the ",(0,r.jsx)(t.code,{children:"webServer"})," option"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-workers",children:"testConfig.workers"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["The maximum number of concurrent worker processes to use for parallelizing tests. Can also be set as percentage of logical CPU cores, e.g. ",(0,r.jsx)(t.code,{children:"'50%'."}),". See ",(0,r.jsx)(t.a,{href:"./test-parallel",children:"Parallelism"})," and ",(0,r.jsx)(t.a,{href:"./test-sharding",children:"Sharding"})," for more details."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"filtering-tests",children:"Filtering Tests"}),"\n",(0,r.jsx)(t.p,{children:"Filter tests by glob patterns or regular expressions."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  // Glob patterns or regular expressions to ignore test files.\n  testIgnore: '*test-assets',\n\n  // Glob patterns or regular expressions that match test files.\n  testMatch: '*todo-tests/*.spec.ts',\n});\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-test-ignore",children:"testConfig.testIgnore"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Glob patterns or regular expressions that should be ignored when looking for the test files. For example, ",(0,r.jsx)(t.code,{children:"'*test-assets'"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-test-match",children:"testConfig.testMatch"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Glob patterns or regular expressions that match test files. For example, ",(0,r.jsx)(t.code,{children:"'*todo-tests/*.spec.ts'"}),". By default, Playwright runs ",(0,r.jsx)("code",{children:".*(test|spec).(js|ts|mjs)"})," files."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  // Folder for test artifacts such as screenshots, videos, traces, etc.\n  outputDir: 'test-results',\n\n  // path to the global setup files.\n  globalSetup: require.resolve('./global-setup'),\n\n  // path to the global teardown files.\n  globalTeardown: require.resolve('./global-teardown'),\n\n  // Each test is given 30 seconds.\n  timeout: 30000,\n\n});\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-global-setup",children:"testConfig.globalSetup"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Path to the global setup file. This file will be required and run before all the tests. It must export a single function."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-global-teardown",children:"testConfig.globalTeardown"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Path to the global teardown file. This file will be required and run after all the tests. It must export a single function."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-output-dir",children:"testConfig.outputDir"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Folder for test artifacts such as screenshots, videos, traces, etc."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-timeout",children:"testConfig.timeout"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Playwright enforces a ",(0,r.jsx)(t.a,{href:"/docs/test-timeouts",children:"timeout"})," for each test, 30 seconds by default. Time spent by the test function, test fixtures and beforeEach hooks is included in the test timeout."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"expect-options",children:"Expect Options"}),"\n",(0,r.jsx)(t.p,{children:"Configuration for the expect assertion library."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  expect: {\n    // Maximum time expect() should wait for the condition to be met.\n    timeout: 5000,\n\n    toHaveScreenshot: {\n      // An acceptable amount of pixels that could be different, unset by default.\n      maxDiffPixels: 10,\n    },\n\n    toMatchSnapshot: {\n      // An acceptable ratio of pixels that are different to the\n      // total amount of pixels, between 0 and 1.\n      maxDiffPixelRatio: 0.1,\n    },\n  },\n\n});\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-testconfig#test-config-expect",children:"testConfig.expect"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"/docs/test-assertions",children:"Web first assertions"})," like ",(0,r.jsx)(t.code,{children:"expect(locator).toHaveText()"})," have a separate timeout of 5 seconds by default. This is the maximum time the ",(0,r.jsx)(t.code,{children:"expect()"})," should wait for the condition to be met. Learn more about ",(0,r.jsx)(t.a,{href:"/docs/test-timeouts",children:"test and expect timeouts"})," and how to set them for a single test."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1",children:"expect(page).toHaveScreenshot()"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Configuration for the ",(0,r.jsx)(t.code,{children:"expect(locator).toHaveScreenshot()"})," method."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"/docs/api/class-snapshotassertions#snapshot-assertions-to-match-snapshot-1",children:"expect(value).toMatchSnapshot()"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Configuration for the ",(0,r.jsx)(t.code,{children:"expect(locator).toMatchSnapshot()"})," method."]})]})]})]})]})}function h(e={}){let{wrapper:t}={...(0,l.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},7645:function(e,t,s){s.d(t,{Z:()=>l});var n=s("5893");s("7294");var r=s("7026");function l(e){let{children:t,hidden:s,className:l}=e;return(0,n.jsx)("div",{role:"tabpanel",className:(0,r.Z)("tabItem_Ymn6",l),hidden:s,children:t})}},8168:function(e,t,s){s.d(t,{Z:()=>m});var n=s("5893"),r=s("7294"),l=s("7026"),i=s("4718"),o=s("6550"),a=s("8714"),c=s("9207"),d=s("9413"),h=s("4510");function u(e){var t,s;return null!==(s=null===(t=r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))||void 0===t?void 0:t.filter(Boolean))&&void 0!==s?s:[]}function f(e){let{value:t,tabValues:s}=e;return s.some(e=>e.value===t)}var x=s("6735");function p(e){let{className:t,block:s,selectedValue:r,selectValue:o,tabValues:a}=e,c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.o5)(),h=e=>{let t=e.currentTarget,s=a[c.indexOf(t)].value;s!==r&&(d(t),o(s))},u=e=>{var t,s;let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{let s=c.indexOf(e.currentTarget)+1;n=null!==(t=c[s])&&void 0!==t?t:c[0];break}case"ArrowLeft":{let t=c.indexOf(e.currentTarget)-1;n=null!==(s=c[t])&&void 0!==s?s:c[c.length-1]}}null==n||n.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":s},t),children:a.map(e=>{let{value:t,label:s,attributes:i}=e;return(0,n.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>{c.push(e)},onKeyDown:u,onClick:h,...i,className:(0,l.Z)("tabs__item","tabItem_LNqP",null==i?void 0:i.className,{"tabs__item--active":r===t}),children:null!=s?s:t},t)})})}function g(e){let{lazy:t,children:s,selectedValue:i}=e,o=(Array.isArray(s)?s:[s]).filter(Boolean);if(t){let e=o.find(e=>e.props.value===i);return e?(0,r.cloneElement)(e,{className:(0,l.Z)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:o.map((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==i}))})}function j(e){let t=function(e){let{defaultValue:t,queryString:s=!1,groupId:n}=e,l=function(e){let{values:t,children:s}=e;return(0,r.useMemo)(()=>{let e=null!=t?t:u(s).map(e=>{let{props:{value:t,label:s,attributes:n,default:r}}=e;return{value:t,label:s,attributes:n,default:r}});return!function(e){let t=(0,d.lx)(e,(e,t)=>e.value===t.value);if(t.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(t.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'))}(e),e},[t,s])}(e),[i,x]=(0,r.useState)(()=>(function(e){var t;let{defaultValue:s,tabValues:n}=e;if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!f({value:s,tabValues:n}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(s,'" but none of its children has the corresponding value. Available values are: ').concat(n.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return s}let r=null!==(t=n.find(e=>e.default))&&void 0!==t?t:n[0];if(!r)throw Error("Unexpected error: 0 tabValues");return r.value})({defaultValue:t,tabValues:l})),[p,g]=function(e){let{queryString:t=!1,groupId:s}=e,n=(0,o.k6)(),l=function(e){let{queryString:t=!1,groupId:s}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!s)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=s?s:null}({queryString:t,groupId:s});return[(0,c._X)(l),(0,r.useCallback)(e=>{if(!l)return;let t=new URLSearchParams(n.location.search);t.set(l,e),n.replace({...n.location,search:t.toString()})},[l,n])]}({queryString:s,groupId:n}),[j,m]=function(e){let{groupId:t}=e,s=t?"docusaurus.tab.".concat(t):null,[n,l]=(0,h.Nk)(s);return[n,(0,r.useCallback)(e=>{s&&l.set(e)},[s,l])]}({groupId:n}),y=(()=>{let e=null!=p?p:j;return f({value:e,tabValues:l})?e:null})();return(0,a.Z)(()=>{y&&x(y)},[y]),{selectedValue:i,selectValue:(0,r.useCallback)(e=>{if(!f({value:e,tabValues:l}))throw Error("Can't select invalid tab value=".concat(e));x(e),g(e),m(e)},[g,m,l]),tabValues:l}}(e);return(0,n.jsxs)("div",{className:(0,l.Z)("tabs-container","tabList__CuJ"),children:[(0,n.jsx)(p,{...t,...e}),(0,n.jsx)(g,{...t,...e})]})}function m(e){let t=(0,x.Z)();return(0,n.jsx)(j,{...e,children:u(e.children)},String(t))}},2079:function(e,t,s){s.d(t,{Z:()=>i});var n=s("5893");s("7294");let r="dot_iyam",l="menuBar_WzY4",i=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"card_GRg2",children:[(0,n.jsxs)("div",{className:"header_XfNy",children:[(0,n.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[(0,n.jsx)("span",{className:r,style:{backgroundColor:"rgb(242, 95, 88)"}}),(0,n.jsx)("span",{className:r,style:{backgroundColor:"rgb(251, 190, 60)"}}),(0,n.jsx)("span",{className:r,style:{backgroundColor:"rgb(88, 203, 66)"}})]}),(0,n.jsx)("div",{className:"addressBar_X0Gc",children:"http://localhost:3000"}),(0,n.jsx)("div",{style:{marginLeft:"auto"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:l}),(0,n.jsx)("span",{className:l}),(0,n.jsx)("span",{className:l})]})})]}),(0,n.jsxs)("div",{className:"body_ikuQ",children:[(0,n.jsx)("div",{className:"html-card-page ".concat("pageSide_EDh8"," ").concat("webView_lqhL"),children:t[0]}),(0,n.jsx)("div",{className:"html-card-code ".concat("codeSide_OQWj"),children:t[1]})]})]})}},65:function(e,t,s){s.d(t,{Z:function(){return o},a:function(){return i}});var n=s(7294);let r={},l=n.createContext(r);function i(e){let t=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);